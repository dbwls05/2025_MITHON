<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>회원가입 - 키워드 선택</title>
<style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans KR',sans-serif}
    body{background:#fff}
    .frame{width:393px;height:852px;margin:0 auto;padding:18px 20px 24px;background:#fff;position:relative;overflow:hidden}
    .top{display:flex;align-items:center;gap:12px;margin-bottom:14px}
    .back{font-size:22px;cursor:pointer;user-select:none}
    .header-title{flex:1;text-align:center;font-weight:600;font-size:16px}
    .progress-wrap{height:6px;background:#e6e6e6;border-radius:4px;overflow:hidden;margin:8px 0 20px}
    .progress{height:100%;width:42%;background:#c6f08e} /* 이미지와 유사한 진행률 색/길이 */
    .page-title{font-size:20px;font-weight:700;line-height:1.2;margin-bottom:8px;color:#111}
    .subtitle{color:#9b9b9b;font-size:13px;margin-bottom:18px}
    .tags{display:flex;flex-wrap:wrap;gap:12px 12px}
    .tag{
        background:#eef9e6;
        color:#111;
        padding:10px 14px;
        border-radius:12px;
        font-size:13px;
        cursor:pointer;
        transition:background .16s,transform .08s;
        user-select:none;
    }
    .tag:active{transform:scale(.99)}
    .tag.selected{background:#c6f08e}
    .error-msg{color:#ff3b30;font-size:13px;text-align:center;margin-top:14px;display:none}
    .next-button{
        position:absolute;
        left:20px;
        bottom:20px;
        width:calc(100% - 40px);
        max-width:353px;
        height:56px;
        border-radius:28px;
        border:none;
        font-size:15px;
        cursor:pointer;
        display:flex;
        align-items:center;
        justify-content:center;
        box-shadow:none;
    }
    .next-button a{
        color: #9A9A9A;
        text-decoration: none; 

    }
    .next-button.inactive{background:#d9d9d9;color:#6b6b6b;cursor:default}
    .next-button.active{background:#000;color:#fff}
    /* 모바일 텍스트 선택 방지(입력 제외) */
    .tag, .back, .header-title, .page-title, .subtitle { -webkit-user-select:none; -ms-user-select:none; user-select:none; }
</style>
</head>
<body>
    <div class="frame" role="main" aria-labelledby="title">
        <div class="top">
            <div class="back" onclick="history.back()">←</div>
            <div class="header-title">회원가입</div>
        </div>

        <div class="progress-wrap" aria-hidden="true">
            <div class="progress"></div>
        </div>

        <div id="title" class="page-title">요즘 당신의 머릿속을<br/>채운 키워드는?</div>
        <div class="subtitle">이야기하고 싶은 주제를 모두 선택해주세요.</div>

        <div class="tags" id="tagsContainer" aria-live="polite" aria-atomic="true">
            <div class="tag" data-key="#오늘급식" onclick="toggleTag(this)">#오늘급식</div>
            <div class="tag" data-key="#수행평가" onclick="toggleTag(this)">#수행평가</div>
            <div class="tag" data-key="#시험공부" onclick="toggleTag(this)">#시험공부</div>
            <div class="tag" data-key="#음악/아이돌" onclick="toggleTag(this)">#음악/아이돌</div>
            <div class="tag" data-key="#영화/드라마" onclick="toggleTag(this)">#영화/드라마</div>
            <div class="tag" data-key="#친구/연애" onclick="toggleTag(this)">#친구/연애</div>
            <div class="tag" data-key="#고민상담" onclick="toggleTag(this)">#고민상담</div>
            <div class="tag" data-key="#웃긴썰" onclick="toggleTag(this)">#웃긴썰</div>
            <div class="tag" data-key="#창피한썰" onclick="toggleTag(this)">#창피한썰</div>
            <div class="tag" data-key="#질문있음" onclick="toggleTag(this)">#질문있음</div>
            <div class="tag" data-key="#TMI" onclick="toggleTag(this)">#TMI</div>
            <div class="tag" data-key="#아무말" onclick="toggleTag(this)">#아무말</div>
        </div>

        <p id="errorMsg" class="error-msg">선택하지 않았습니다. 선택해주세요.</p>

        <button id="nextBtn" class="next-button inactive"><a href="singIn5.html">다음</a></button>
    </div>

<script>
    // 선택 토글 및 버튼 상태 업데이트
    function toggleTag(el){
        el.classList.toggle('selected');
        updateNextButton();
    }

    function updateNextButton(){
        const any = document.querySelectorAll('.tag.selected').length > 0;
        const btn = document.getElementById('nextBtn');
        if(any){
            btn.classList.remove('inactive');
            btn.classList.add('active');
            btn.setAttribute('aria-disabled','false');
        }else{
            btn.classList.remove('active');
            btn.classList.add('inactive');
            btn.setAttribute('aria-disabled','true');
        }
    }

    function onNext(){
        const selected = document.querySelectorAll('.tag.selected');
        const err = document.getElementById('errorMsg');
        const btn = document.getElementById('nextBtn');

        // 비활성 상태면 에러만 표시
        if(selected.length === 0 || btn.classList.contains('inactive')){
            err.style.display = 'block';
            setTimeout(()=> err.style.display='none',3000);
            return;
        }

        // 선택된 키워드 값들 저장 (localStorage)
        const values = Array.from(selected).map(el=>el.dataset.key);
        try {
            localStorage.setItem('selectedKeywords', JSON.stringify(values));
        } catch(e) {
            console.warn('localStorage 저장 실패', e);
        }

        // 다음 페이지로 이동 (파일명은 프로젝트에 맞게 수정하세요)
        // 예: signin_step5.html 또는 원하는 경로로 변경
        window.location.href = 'signin_step5.html';
    }

    // 엔터/스페이스로 버튼 작동하게 하기(접근성)
    document.addEventListener('keydown', function(e){
        const btn = document.getElementById('nextBtn');
        if((e.key === 'Enter' || e.key === ' ') && document.activeElement === btn){
            e.preventDefault();
            onNext();
        }
    });

    // 초기 버튼 상태
    document.addEventListener('DOMContentLoaded', updateNextButton);
</script>
</body>
</html>